<p>
  <strong>Floorplan:</strong>
  <%= image_tag(@surkle.floorplan) %>
</p>

<p>
  <strong>Description:</strong>
  <%= @surkle.description %>
</p>

<p>
  <strong>Location:</strong>
  <%= @surkle.location %>
</p>

<% set_of_pairs = [] %>

<% Product.all.each do |product| %>
	<% pair = ["#{product.name} - #{product.description}", product.id] %>
	<% set_of_pairs << pair %>
<% end %>

<div>
	<% @surkle.iconups.each do |iconup| %>
	<p><%= iconup.description %></p>
	<ul>
		<% iconup.products.each do |product| %>
		<li><%= product.name %> <%= product.description %></li>
		<% end %>
	</ul>
		<%= form_tag('/iconups-products', method: 'post') do %>
			<%= hidden_field_tag :iconup_id, iconup.id %>
			<%= select_tag(:product_id, options_for_select(set_of_pairs)) %>
			<%= submit_tag "Add Product", class: "tiny button" %>			
		<% end %>
	<% end %>
</div>



<div>
	<%= form_for(@iconup) do |f| %>
	  <% if @iconup.errors.any? %>
	    <div id="error_explanation">
	      <h2><%= pluralize(@iconup.errors.count, "error") %> prohibited this iconup from being saved:</h2>

	      <ul>
	      <% @iconup.errors.full_messages.each do |msg| %>
	        <li><%= msg %></li>
	      <% end %>
	      </ul>
	    </div>
	  <% end %>

	  <div class="field">
	    <input type="hidden" name="iconup[surkle_id]" value="<%= @surkle.id %>">
	  </div>
	  <div class="field">
	    <%= f.label :icon_id %><br>
	    <%= f.text_field :icon_id %>
	  </div>
	  <div class="field">
	    <%= f.label :description %><br>
	    <%= f.text_field :description %>
	  </div>
	  <div class="field">
	    <%= f.label :notes %><br>
	    <%= f.text_area :notes %>
	  </div>
	  <div class="actions">
	    <%= f.submit %>
	  </div>
	<% end %>
</div>

<%= link_to 'Edit', edit_surkle_path(@surkle) %> |
<%= link_to 'Back', surkles_path %>
